cuda-matrix
===========

Matrix multiplication on CUDA

1. Matrix Generator
The Matrix Generator generates a file "matr.txt" with the following structure:

    N
    Matrix A
    Matrix B
    Matrix C

Each value of a matrix is generated randomly and separated from others by a blankspace. Sample file looks like this:

    3
    0 7 0 
    1 8 3 
    4 5 6 
    0 5 7 
    2 9 6 
    0 1 1 
    5 0 4 
    5 6 9 
    7 6 5 

The Matrix Generator source file is "matrgen.c". To compile, type:

    g++ matrgen.c -o matrgen

To run, type:
    
    ./matrgen N

where N is the desired size of all square matrices (NxN). By default, the range of random number generator is from 0 to 9. You can specify a range by putting a second argument:

    ./matrgen N x

This will generate three NxN matrices, each value is in range 0..x-1;


2. The Program
The program reads the file, populates three local matrices, copys them to GPU memory, runs GPU kernel code and copys the result back to local memory, to matrix D.

Each matrix is represented by a structure with integer n representing size and an array of integers el. The array is 1-dimensional, and the size of array is n*n. So, maatrices are stored in row-major order: A(x,y) = el[x*n+y]. For example, the aarray representing matrix A from a sample file above looks like this:

    A.el[9]={0, 7, 0, 1, 8, 3, 4, 5, 6}

The program source file is "matradd.cu". To compile, type:

    nvcc -o matradd --compiler-options -fpermissive matradd.cu

To run, type:

    ./matradd file

where file is name of the file generated by Matrix Generator. By default, the program will execute with no output to the screen, only generating "output.txt" file with the resulting matrix D. You can add the second argument (any value) and the program will output N and resulting matrix D to the screen too.